services:
  sqlbot:
    image: registry.cn-heyuan.aliyuncs.com/images-lsr/sqlbot_fx:v1.0.0
    container_name: sqlbot_fx
    restart: always
    privileged: true
    networks:
      - sqlbot-network
    ports:
      - 8000:8000
      - 8001:8001
      - 5432:5432
    environment:
      # Database configuration
      POSTGRES_SERVER: localhost
      POSTGRES_PORT: 5432
      POSTGRES_DB: sqlbot
      POSTGRES_USER: root
      POSTGRES_PASSWORD: Password123@pg
      # Project basic settings
      PROJECT_NAME: "SQLBot"
      DEFAULT_PWD: "SQLBot@123456"
      # MCP settings (已禁用)
      # SERVER_IMAGE_HOST: http://YOUR_SERVE_IP:MCP_PORT/images/
      # Auth & Security
      # 安全警告: 部署前必须修改SECRET_KEY为唯一随机值！
      # 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
      SECRET_KEY: VCzmavK0pvnXJ89W6_IENxvRaFa1oGqEnsvomGTTD2Y
      # CORS settings
      BACKEND_CORS_ORIGINS: "http://localhost,http://localhost:5173,http://localhost:808,http://localhost:8000,https://localhost,https://localhost:5173"
      # Logging
      LOG_LEVEL: "INFO"
      SQL_DEBUG: False
    volumes:
      - ./data/sqlbot/excel:/opt/sqlbot/data/excel
      - ./data/sqlbot/file:/opt/sqlbot/data/file
      # MCP 图片功能已禁用，不需要挂载 images 目录
      # - ./data/sqlbot/images:/opt/sqlbot/images
      - ./data/sqlbot/logs:/opt/sqlbot/app/logs
      - ./data/postgresql:/var/lib/postgresql/data
    extra_hosts:
      - "aiae.nj.gov.cn:10.192.15.152"

networks:
  sqlbot-network:
